{% extends 'layout.twig' %}

{% block body %}
  <!-- main content -->
  <div class="py-12">
    <!-- header -->
    <div class="text-center py-4">
      <h1 class="font-black tracking-wide text-3xl">
        {{ title }}
      </h1>
    </div>

    {% if errors %}
      <!-- start - errors message container -->
      <div class="py-3">
        {% for error in errors.errors %}
          <p class="bg-red-500 p-1 text-white tracking-wide text-center rounded-md">
            {{ error.msg }}
          </p>
        {% endfor %}
      </div>
      <!-- end - errors message container -->
    {% endif %}

    {% if success %}
      <!-- start - success message container -->
      <div class="py-3">
        <p class="bg-green-500 p-1 text-white tracking-wide text-center rounded-md">
          {{ success }}
        </p>
      </div>
      <!-- end - success message container -->
    {% endif %}
    <!-- form content -->
    <div>
      <form action="/" name="shorten-form" method="post">
        <input type="hidden" name="_csrf" value="{{ csrfToken }}" />
        <div class="flex flex-col items-center py-2 w-full">
          <label for="long-link">Enter a Long URL to Shorten:</label>
          <input type="text"
            name="grue-link"
            class="text-center my-2 p-3 w-full border-2 rounded-md border-gray-400 md:text-lg font-light tracking-wide outline-none focus:border-green-600 text-green-600"
            placeholder="Enter a very long url in here..."
            required />
        </div>
        <div class="flex flex-col items-center w-full">
          <input type="submit"
            class="py-2 px-12 bg-green-500 hover:bg-green-600 text-white cursor-pointer rounded-md"
            value="Shorten Link" />
        </div>
      </form>
    </div>

    {% if output %}
      <!-- output link shorten -->
      <div>
        <hr class="my-4" />
        <div class="text-center">
          <h3 class="underline font-bold text-sm uppercase tracking-wide">
            Shortened Link
          </h3>
          <div class="flex items-center justify-center pt-2">
            <a href="{{ output.redirect }}"
              type="button"
              target="_blank"
              class="text-lg tracking-wide text-green-600">
              {{ output.link }}
            </a>
            <button id="btn"
              aria-label="{{ output.link }}"
              class="ml-2 bg-gray-500 text-sm p-1 rounded hover:bg-gray-600">
              copy
            </button>
          </div>
        </div>
      </div>
    {% endif %}

    <!-- simple api doc -->
    <div class="mt-8">
      <hr class="text-gray-300" />
      <h3 class="text-lg font-black tracking-wide mt-2">
        Simple Api
      </h3>
      <div class="py-2 px-4 rounded-md font-light text-xl tracking-wide mt-2 bg-gray-300">
        curl -X POST https://grue.cf/api/generate -d '{"grue-link":
        "https://www.google.com.ph"}' -H 'Content-Type: application/json'
      </div>
      <div class="mt-2">
        <small>Output:</small>
        <div class="mt-1 bg-gray-400 py-2 px-4 rounded-md tracking-wide text-lg font-light">
          {"link":"https://grue.cf/zTLzH","redirect":"https://www.google.com.ph"}
        </div>
      </div>
    </div>
  </div>
{% endblock %}
